{
  "resourceType": "StructureDefinition",
  "id": "OwnLensDuringVATestSpecification",
  "url": "https://larfuma.github.io/fhir-eyecare-ig/StructureDefinition/OwnLensDuringVATestSpecification",
  "version": "1.0.0",
  "name": "OwnLensDuringVATestSpecification",
  "title": "Own Lens During VA Test Specification",
  "status": "draft",
  "experimental": true,
  "date": "2023-10-07",
  "publisher": "Lars Fuhrmann",
  "description": "Extension capturing lens specification used during a visual acuity test.",
  "fhirVersion": "4.0.1",
  "kind": "complex-type",
  "abstract": false,
  "context": [
    {
      "type": "element",
      "expression": "Observation.component"
    }
  ],
  "type": "Extension",
  "baseDefinition": "http://hl7.org/fhir/StructureDefinition/Extension",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "Extension",
        "path": "Extension",
        "short": "Lens specification used during VA test",
        "definition": "Extension capturing lens specification used during a visual acuity test.",
        "comment": "Based on VisionPrescription.lensSpecification but flattened.",
        "max": "1"
      },
      {
        "id": "Extension.extension",
        "path": "Extension.extension",
        "sliceName": "product",
        "short": "Product type (e.g., spectacles, contact lens)",
        "definition": "Type of corrective device used during the VA test.",
        "type": [
          {
            "code": "CodeableConcept"
          }
        ]
      },
      {
        "id": "Extension.extension:sphere",
        "path": "Extension.extension",
        "sliceName": "sphere",
        "short": "Lens sphere power",
        "definition": "Power of the lens in diopters.",
        "type": [
          {
            "code": "Quantity"
          }
        ]
      },
      {
        "id": "Extension.extension:sphere.value[x]",
        "path": "Extension.extension.value[x]",
        "type": [
          {
            "code": "Quantity"
          }
        ]
      },
      {
        "id": "Extension.extension:cylinder",
        "path": "Extension.extension",
        "sliceName": "cylinder",
        "short": "Lens cylinder power",
        "definition": "Lens power for astigmatism correction.",
        "type": [
          {
            "code": "Quantity"
          }
        ]
      },
      {
        "id": "Extension.extension:cylinder.value[x]",
        "path": "Extension.extension.value[x]",
        "type": [
          {
            "code": "Quantity"
          }
        ]
      },
      {
        "id": "Extension.extension:axis",
        "path": "Extension.extension",
        "sliceName": "axis",
        "short": "Lens cylinder axis",
        "definition": "Axis of the cylinder in degrees (0-180).",
        "type": [
          {
            "code": "integer"
          }
        ]
      },
      {
        "id": "Extension.extension:axis.value[x]",
        "path": "Extension.extension.value[x]",
        "type": [
          {
            "code": "integer"
          }
        ]
      },
      {
        "id": "Extension.extension:prismAmount",
        "path": "Extension.extension",
        "sliceName": "prismAmount",
        "short": "Prism amount",
        "definition": "Amount of prism correction.",
        "type": [
          {
            "code": "Quantity"
          }
        ]
      },
      {
        "id": "Extension.extension:prismAmount.value[x]",
        "path": "Extension.extension.value[x]",
        "type": [
          {
            "code": "Quantity"
          }
        ]
      },
      {
        "id": "Extension.extension:prismBase",
        "path": "Extension.extension",
        "sliceName": "prismBase",
        "short": "Prism base direction",
        "definition": "Base direction of the prism correction.",
        "type": [
          {
            "code": "CodeableConcept"
          }
        ],
        "binding": {
          "strength": "required",
          "valueSet": "http://hl7.org/fhir/ValueSet/vision-base-codes"
        }
      },
      {
        "id": "Extension.extension:prismBase.value[x]",
        "path": "Extension.extension.value[x]",
        "type": [
          {
            "code": "CodeableConcept"
          }
        ]
      },
      {
        "id": "Extension.extension:add",
        "path": "Extension.extension",
        "sliceName": "add",
        "short": "Addition power for multifocal lenses",
        "definition": "Added power for multifocal lenses.",
        "type": [
          {
            "code": "Quantity"
          }
        ]
      },
      {
        "id": "Extension.extension:add.value[x]",
        "path": "Extension.extension.value[x]",
        "type": [
          {
            "code": "Quantity"
          }
        ]
      },
      {
        "id": "Extension.extension:power",
        "path": "Extension.extension",
        "sliceName": "power",
        "short": "Contact lens power",
        "definition": "Power of the contact lens.",
        "type": [
          {
            "code": "Quantity"
          }
        ]
      },
      {
        "id": "Extension.extension:power.value[x]",
        "path": "Extension.extension.value[x]",
        "type": [
          {
            "code": "Quantity"
          }
        ]
      },
      {
        "id": "Extension.extension:backCurve",
        "path": "Extension.extension",
        "sliceName": "backCurve",
        "short": "Contact lens back curvature",
        "definition": "Back curvature of the contact lens.",
        "type": [
          {
            "code": "Quantity"
          }
        ]
      },
      {
        "id": "Extension.extension:backCurve.value[x]",
        "path": "Extension.extension.value[x]",
        "type": [
          {
            "code": "Quantity"
          }
        ]
      },
      {
        "id": "Extension.extension:diameter",
        "path": "Extension.extension",
        "sliceName": "diameter",
        "short": "Contact lens diameter",
        "definition": "Diameter of the contact lens.",
        "type": [
          {
            "code": "Quantity"
          }
        ]
      },
      {
        "id": "Extension.extension:diameter.value[x]",
        "path": "Extension.extension.value[x]",
        "type": [
          {
            "code": "Quantity"
          }
        ]
      },
      {
        "id": "Extension.extension:duration",
        "path": "Extension.extension",
        "sliceName": "duration",
        "short": "Lens wear duration",
        "definition": "Recommended wear duration for the contact lens.",
        "type": [
          {
            "code": "Quantity"
          }
        ]
      },
      {
        "id": "Extension.extension:duration.value[x]",
        "path": "Extension.extension.value[x]",
        "type": [
          {
            "code": "Quantity"
          }
        ]
      },
      {
        "id": "Extension.extension:color",
        "path": "Extension.extension",
        "sliceName": "color",
        "short": "Lens color",
        "definition": "Color of the lens.",
        "type": [
          {
            "code": "string"
          }
        ]
      },
      {
        "id": "Extension.extension:color.value[x]",
        "path": "Extension.extension.value[x]",
        "type": [
          {
            "code": "string"
          }
        ]
      },
      {
        "id": "Extension.extension:brand",
        "path": "Extension.extension",
        "sliceName": "brand",
        "short": "Lens brand",
        "definition": "Brand of the lens.",
        "type": [
          {
            "code": "string"
          }
        ]
      },
      {
        "id": "Extension.extension:brand.value[x]",
        "path": "Extension.extension.value[x]",
        "type": [
          {
            "code": "string"
          }
        ]
      },
      {
        "id": "Extension.extension:note",
        "path": "Extension.extension",
        "sliceName": "note",
        "short": "Notes about the lens",
        "definition": "Notes or comments about the lens.",
        "type": [
          {
            "code": "string"
          }
        ]
      },
      {
        "id": "Extension.extension:note.value[x]",
        "path": "Extension.extension.value[x]",
        "type": [
          {
            "code": "string"
          }
        ]
      },
      {
        "id": "Extension.extension:Corrective_Device_Reference",
        "path": "Extension.extension",
        "sliceName": "Corrective_Device_Reference",
        "short": "Reference to a corrective device used",
        "definition": "Reference to a corrective device (e.g., spectacles, contact lenses) used during the VA test.",
        "type": [
          {
            "code": "Reference"
          }
        ]
      },
      {
        "id": "Extension.extension:Corrective_Device_Reference.value[x]",
        "path": "Extension.extension.value[x]",
        "type": [
          {
            "code": "Reference"
          }
        ]
      },
      {
        "id": "Extension.extension:Lensmeter_Observation_Reference",
        "path": "Extension.extension",
        "sliceName": "Lensmeter_Observation_Reference",
        "short": "Reference to a Lensmeter observation",
        "definition": "Reference to a Lensmeter Observation where the lens values were initially produced.",
        "type": [
          {
            "code": "Reference"
          }
        ]
      },
      {
        "id": "Extension.extension:Lensmeter_Observation_Reference.value[x]",
        "path": "Extension.extension.value[x]",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.org/fhir/StructureDefinition/Observation"
            ]
          }
        ]
      },
      {
        "id": "Extension.extension:Vision_Prescription_Reference",
        "path": "Extension.extension",
        "sliceName": "Vision_Prescription_Reference",
        "short": "Reference to a Vision Prescription",
        "definition": "Reference to a VisionPrescription from where the lens values were initially produced.",
        "type": [
          {
            "code": "Reference"
          }
        ]
      },
      {
        "id": "Extension.extension:Vision_Prescription_Reference.value[x]",
        "path": "Extension.extension.value[x]",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.org/fhir/StructureDefinition/VisionPrescription"
            ]
          }
        ]
      },
      {
        "id": "Extension.extension.value[x]",
        "path": "Extension.extension.value[x]",
        "type": [
          {
            "code": "CodeableConcept"
          }
        ]
      },
      {
        "id": "Extension.url",
        "path": "Extension.url",
        "fixedUri": "https://larfuma.github.io/fhir-eyecare-ig/StructureDefinition/OwnLensDuringVATestSpecification"
      },
      {
        "id": "Extension.value[x]",
        "path": "Extension.value[x]",
        "max": "0"
      }
    ]
  }
}